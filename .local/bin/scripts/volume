#!/bin/sh
volume=$(awk -F"[][]" '/dB/ { print $2 }' <(amixer sget Master) | cut -f1 -d '%')
muted=$(amixer get Master | grep -c '\[on\]')
microphone=$(amixer get Capture | grep -c '\[on]')
final=

if [ $muted == 0 ]; then
	final=""
elif [ $volume -ge 40 ]; then
	final=" $volume%"
elif [ $volume -ge 10 ]; then
	final=" $volume%"
else
	final=" $volume%"
fi

if [ $microphone == 0 ]; then
	final="$final "
else
	final="$final "
fi

echo $final
